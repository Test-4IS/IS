var deviceOn,onlineNet,pictureSource,destinationType,fudgeTempCanvas,SysVar="iOS",CONFIG=function(){var t={KmPerMile:1.609344,SpeedOfLight:9.4605284*Math.pow(10,12),SpeedOfLightKmPerSec:299792.458,KmPerAU:149597871,SunToEarth:1.496*Math.pow(10,11),KmPerParsec:3.08567758*Math.pow(10,13),Boltz:5.67*Math.pow(10,-8),Boltzmann:13806488e-30,Prohibited1:"Prohibited by Einstein",MassOfSun:1.9891*Math.pow(10,30),ConstOfGravity:6.673*Math.pow(10,-11),SecsPerYear:3.15569*Math.pow(10,7),"Hubble-KmSMpc":72,NoOfStarsinMW:3e11,SolarRadiation:3.04*Math.pow(10,25),SolarAccelerationAt1AU:.00593,planck:662606957e-42,planckLength:161619926e-43};return{get:function(e){return t[e]}}}();function alertX(e){try{console.log(e)}catch(e){}}function alertY(e){try{navigator.notification.alert(e,onDoAlert,"Alert","OK"),console.log(e)}catch(e){}}function onDoAlert(){console.log("**===========**")}function gotoHomePage(){onlineNet?window.open(encodeURI("http://i4is.org/"),"_blank","location=yes"):alert("No Network connection")}function gotoNewsLetter(){onlineNet?window.open(encodeURI("http://i4is.org/app/webroot/uploads/files/Principium_8_V2.pdf"),"_blank","location=yes"):alert("No Network connection")}function gotoDaedalus(){onlineNet?window.open(encodeURI("http://www.bis-space.com/2013/01/02/8282/new-project-daedalus-model"),"_blank","location=yes"):alert("No Network connection")}function gotoSunjammer(){onlineNet?window.open(encodeURI("http://www.nasa.gov/mission_pages/tdm/solarsail/solarsail_overview_prt.htm"),"_blank","location=yes"):alert("No Network connection")}function loadLinks(){var e,t,n,a,o;-1!=navigator.userAgent.indexOf("Android")&&(e=document,t="script",n="twitter-wjs",o=e.getElementsByTagName(t)[0],e.getElementById(n)||((a=e.createElement(t)).id=n,a.src="//platform.twitter.com/widgets.js",o.parentNode.insertBefore(a,o))),navigator.splashscreen.hide()}function calcDist(e,t){var n,a;0!=isNumber(t)&&0!=isNumber(e)?(n=(t-e)/5,n=(n=10*Math.pow(10,n)).toPrecision(4),a=(document.Cepheids.D.value=n)*CONFIG.get("Hubble-KmSMpc")/1e3,document.Cepheids.H.value=a.toPrecision(2)):alert("Invalid input, must be numeric")}function resetDist(){document.Cepheids.Ap.value=-26.8,calcDist(document.Cepheids.Ab.value=4.8,-26.8)}function lum(e,t){var n,a;if(0!=isNumber(e)&&0!=isNumber(t)){try{n=1e3*Math.abs(e),a=Math.abs(t)}catch(e){alert("Invalid input: "+e.message)}if(n<10)return alert("Invalid Radius"),void(document.star.R.value=0);if(a<1e3)return alert("Star Too Cold"),void(document.star.L.value=0);chgTempCanvas(a,(4*Math.PI*CONFIG.get("Boltz")*Math.pow(n,2)*Math.pow(a,4)).toPrecision(4))}else alert("Invalid input, must be numeric")}function chgTempCanvas(e,t){var n;try{var a=document.getElementById("tempCanvas"),o=a.getContext("2d");o.clearRect(0,0,a.height,a.width),n="#000000",o.rect(0,0,a.height,a.width),o.font="30px Arial",o.fillStyle=n,o.fillText(fudgeTempCanvas,30,25),n="#FF0000",3500<e&&(n="#FFA500"),4900<e&&(n="#FFFF00"),6e3<e&&(n="#FFFFE0"),7500<e&&(n="#FFFFFF"),1e4<e&&(n="#ADD8E6"),28e3<e&&(n="#0000FF"),o.rect(0,0,a.height,a.width),o.font="30px Arial",o.fillStyle=n,o.fillText(t,30,25),fudgeTempCanvas=t}catch(e){alert("pageshow - #pageTemp Error: "+e.message)}}function resetTemp(){var e=696342;lum(document.star.R.value=e,document.star.T.value=5778)}function calcDrake(e,t,n,a,o,r,i){var c,u,l,s,m,d,v,h;if(0!=isNumber(e)&&0!=isNumber(t)&&0!=isNumber(n)&&0!=isNumber(a)&&0!=isNumber(o)&&0!=isNumber(r)&&0!=isNumber(i)){try{u=Math.abs(e),l=Math.abs(t),s=Math.abs(n),m=Math.abs(a),d=Math.abs(o),v=Math.abs(r),h=Math.abs(i)}catch(e){return void alert("Invalid input: "+e.message)}return c=u*(l/100)*s*(m/100)*(d/100)*(v/100)*h,document.Drake.N1.value=Math.round(CONFIG.get("NoOfStarsinMW")/c),chgDrakeCanvas(Math.round(c)),Math.round(c)}alert("Invalid input, must be numeric")}function resetDrake(){document.Drake.R.value=1,$("#Fp").val(50),$("#Fp").slider("refresh"),$("#Ne").val(3),$("#Ne").slider("refresh"),$("#Fl").val(100),$("#Fl").slider("refresh"),$("#Fi").val(100),$("#Fi").slider("refresh"),$("#Fc").val(15),$("#Fc").slider("refresh"),document.Drake.L.value=1e6}function calcSail(e,t,n,a){var o,r,i,c,u,l,s,m,d;try{var v=CONFIG.get("SolarRadiation"),h=CONFIG.get("SpeedOfLightKmPerSec"),g=(CONFIG.get("SolarAccelerationAt1AU"),CONFIG.get("SunToEarth"));o=Math.abs(e),s=v/((r=Math.abs(t)*g)*r),i=Math.abs(n),c=Math.abs(a),l=(m=(u=(1+o)*(s/h))/(c/i))/(.00593/(t*t))}catch(e){return void alert("Invalid input: "+e.message)}try{document.Sail.Pr.value=u.toPrecision(4),document.Sail.Ac.value=m.toPrecision(4),document.Sail.Li.value=l.toPrecision(4),d=42.1*Math.sqrt(l)/Math.sqrt(t),document.Sail.Es.value=d.toPrecision(4)}catch(e){return void alert("Calc failed to update: "+e.message)}}function calcSailDefault(){$("#Rf").val(1),$("#Rf").slider("refresh"),$("#Ds").val(1),$("#Ds").slider("refresh"),calcSail(1,1,document.Sail.Sa.value=1200,document.Sail.Sm.value=32e3)}function calcVST(e,t){var n;0!=isNumber(t)&&0!=isNumber(e)?(n=Math.abs(t)/Math.abs(e),document.vxt.V.value=Math.round(1e3*n)/1e3,document.vxt.tm.value=1<n?CONFIG.get("Prohibited1"):1==n?"Time freezes":Math.round(1e5*calcTimeDilation(n*CONFIG.get("SpeedOfLight")))/1e5):alert("Invalid input, must be numeric")}function calcIRE(e,t,n){var a,o,r,i,c;0!=isNumber(e)&&0!=isNumber(t)&&0!=isNumber(n)?(r=Math.abs(e),a=Math.abs(t),o=Math.abs(n),c=r*Math.log(a/o),document.ire.V.value=Math.round(c),i=c/CONFIG.get("SpeedOfLightKmPerSec"),document.ire.c.value=Math.round(1e5*i)/1e5,1<i?document.ire.tm.value=CONFIG.get("Prohibited1"):i==CONFIG.get("SpeedOfLightKmPerSec")?document.ire.tm.value="Time freezes":document.ire.tm.value=Math.round(1e5*calcTimeDilation(i*CONFIG.get("SpeedOfLight")))/1e5):alert("Invalid input, must be numeric")}function calcTimeDilation(e){var t,n;if(0!=isNumber(e))return 0==(n=1-(t=Math.abs(e))*t/(CONFIG.get("SpeedOfLight")*CONFIG.get("SpeedOfLight")))?"Time freezes":n<0?-1/Math.sqrt(-1*n):1/Math.sqrt(n);alert("Invalid input, must be numeric")}function calcConv(e){return e[0].checked?(function(e){var t,n;if(0==isNumber(e))return alert("Invalid input, must be numeric");t=Math.abs(e),n=t/CONFIG.get("KmPerParsec"),document.Conv.P.value=n.toPrecision(4),n=t/CONFIG.get("KmPerAU"),document.Conv.A.value=n.toPrecision(4),n=t/CONFIG.get("SpeedOfLight"),document.Conv.L.value=n.toPrecision(4),n=t/CONFIG.get("KmPerMile"),document.Conv.M.value=n.toPrecision(4)}(document.Conv.K.value),setThemeE("A"),setThemeE("P"),setThemeE("L"),setThemeDefault("K"),void setThemeE("M")):e[1].checked?(function(e){var t,n;if(0==isNumber(e))return alert("Invalid input, must be numeric");t=Math.abs(e*CONFIG.get("KmPerMile")),document.Conv.K.value=t.toPrecision(4),n=t/CONFIG.get("KmPerAU"),document.Conv.A.value=n.toPrecision(4),n=t/CONFIG.get("SpeedOfLight"),document.Conv.L.value=n.toPrecision(4),n=t/CONFIG.get("KmPerParsec"),document.Conv.P.value=n.toPrecision(4)}(document.Conv.M.value),setThemeE("A"),setThemeE("P"),setThemeE("L"),setThemeDefault("M"),void setThemeE("K")):e[2].checked?(function(e){var t,n;if(0==isNumber(e))return alert("Invalid input, must be numeric");t=Math.abs(e)*CONFIG.get("KmPerAU"),document.Conv.K.value=t.toPrecision(4),n=t/CONFIG.get("KmPerParsec"),document.Conv.P.value=n.toPrecision(4),n=t/CONFIG.get("SpeedOfLight"),document.Conv.L.value=n.toPrecision(4),n=t/CONFIG.get("KmPerMile"),document.Conv.M.value=n.toPrecision(4)}(document.Conv.A.value),setThemeE("K"),setThemeE("P"),setThemeE("L"),setThemeDefault("A"),void setThemeE("M")):e[3].checked?(function(e){var t,n;if(0==isNumber(e))return alert("Invalid input, must be numeric");t=Math.abs(e)*CONFIG.get("KmPerParsec"),document.Conv.K.value=t.toPrecision(4),n=t/CONFIG.get("KmPerAU"),document.Conv.A.value=n.toPrecision(4),n=t/CONFIG.get("SpeedOfLight"),document.Conv.L.value=n.toPrecision(4),n=t/CONFIG.get("KmPerMile"),document.Conv.M.value=n.toPrecision(4)}(document.Conv.P.value),setThemeE("K"),setThemeE("A"),setThemeE("L"),setThemeDefault("P"),void setThemeE("M")):e[4].checked?(function(e){var t,n;if(0==isNumber(e))return alert("Invalid input, must be numeric");t=Math.abs(e)*CONFIG.get("SpeedOfLight"),document.Conv.K.value=t.toPrecision(4),n=t/CONFIG.get("KmPerParsec"),document.Conv.P.value=n.toPrecision(4),n=t/CONFIG.get("KmPerAU"),document.Conv.A.value=n.toPrecision(4),n=t/CONFIG.get("KmPerMile"),document.Conv.M.value=n.toPrecision(4)}(document.Conv.L.value),setThemeE("K"),setThemeE("A"),setThemeE("P"),setThemeDefault("L"),void setThemeE("M")):void alert("Invalid units")}function convReset(){document.Conv.K.value=0,document.Conv.P.value=0,document.Conv.A.value=0,document.Conv.L.value=0,document.Conv.M.value=0}function calcVelocity(e,t){var n;return n=CONFIG.get("ConstOfGravity")/Math.pow(1e3,3)*(Math.abs(t)*CONFIG.get("MassOfSun"))/e,Math.sqrt(n)}function testF(e,t){return e*t}function rtnData(e){for(var t=new Array(10),n=0;n<10;n++)t[n]=new Array(20),t[n][0]=5*n,t[n][1]=5*testF(n,e);return t}function orbit(e,t){var n,a,o,r,i=new Array(2),c=new Array(361);i[0]=0,i[1]=0,a=getMinor(e,t),r=getFocus(e,t);for(var u=0;u<60;u++){o=6*u*Math.PI/180,n=e*Math.cos(o)+r,a=getMinor(e,t)*Math.sin(o);var l=new Array(2);l[0]=n,l[1]=a,c[u]=l}return c[61]=i,c}function getMinor(e,t){var n=1-t*t;return e*Math.sqrt(n)}function getFocus(e,t){var n;return n=getMinor(e,t),Math.sqrt(e*e-n*n)}function crtGraph(u,l,s){$(function(){var e=10,t=-30,n=30,a=orbit(u,l),o=getFocus(u,l),r=u*CONFIG.get("KmPerAU"),i=calcVelocity(r,s),c=2*Math.PI*r/(i*CONFIG.get("SecsPerYear"));chgOrbitCanvas(i.toPrecision(4),c.toPrecision(4)),s<.001&&(e=4,t=-.003,n=.003),$.plot($("#flotcontainer"),[{label:"Orbit",data:a}],{series:{lines:{show:!0},points:{show:!0}},legend:{backgroundOpacity:.5,noColumns:0,backgroundColor:"blue",position:"ne"},xaxis:{ticks:e,min:t+o,max:n+o},yaxis:{ticks:10,min:t,max:n},grid:{backgroundColor:{colors:["#fff","#eee"]}}})})}function setSlider(e){var t=document.getElementById("oProperties"),n=document.getElementById("in1");n.min="0",e<.001?("0.003"!=n.max&&(n.value="0.00028",n.setAttribute("step","0.00002"),n.setAttribute("max","0.003"),$("#in1").slider("refresh")),t.innerHTML="Geostationary orbit: 42,164 km  - 0.000282 AU <br />Moons orbit:  385,000 km  - 0.00257 AU   <br />Plus Earths radius: 6,371 km "):("30"!=n.max&&(n.value="1",n.setAttribute("step","1"),n.setAttribute("max","30"),$("#in1").slider("refresh")),t.innerHTML="Earths orbit: 1.496e+8 km  - 1 AU ")}function isNumber(e){return!isNaN(+e)&&null!=e}function isEven(e){return e==parseFloat(e)?!(e%2):void 0}function xml2html(e){return e.slice(1,-1)}function testCookies(){navigator.cookieEnabled;return document.cookie="testcookie",-1!=document.cookie.indexOf("testcookie")}function GetURLParameter(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]==e)return a[1]}}function setThemeE(e){var t=document.getElementById(e);t.setAttribute("data-theme","b"),t.setAttribute("class","ui-content ui-disabled"),t.setAttribute("style","font-weight: bold;"),t.readOnly=!0}function setThemeDefault(e){var t=document.getElementById(e);t.setAttribute("data-theme","b"),t.setAttribute("class","ui-content ui-body-e"),t.readOnly=!1}function setInfo(){var e=navigator.userAgent+"",t=document.getElementById("envProperties"),n=document.getElementById("deviceProperties"),a=document.getElementById("plotProperties"),o=document.getElementById("jqProperties"),r=document.getElementById("vbProperties"),i=document.getElementById("cameraProperties"),c=document.getElementById("netProperties");t.innerHTML="Env Index: "+e.indexOf+"<br />Env User:   "+navigator.userAgent+"<br />",a.innerHTML="Graph Flot version : "+$.plot.version,o.innerHTML="JQuery version : "+jQuery().jquery,r.innerHTML="Validate Browser : "+$.mobile.gradeA();try{window.requestFileSystem(LocalFileSystem.PERSISTENT,0,fsInfo,fsFail)}catch(e){document.getElementById("fsProperties").innerHTML="File System Error: "+e.message}if(1==deviceOn){n.innerHTML="Device On";try{i.innerHTML="pictureSource: "+navigator.camera.PictureSourceType.PHOTOLIBRARY+"<br/>destinationType: "+navigator.camera.DestinationType.FILE_URI+"<br/>"}catch(e){n.innerHTML="Error reading device details: "+e.message}}else n.innerHTML="Device Name: Testing with HTML only",i.innerHTML="pictureSource: No camera available in test";c.innerHTML=onlineNet?"Connected to Network":"No Network connection"}function fsInfo(e){document.getElementById("fsProperties").innerHTML="Full Path: "+e.root.fullPath,e.root.getFile("I4ISevents.xml",{create:!1},flInfo,flFail)}function fsFail(e){document.getElementById("fsProperties").innerHTML="Full Path: "+e.code}function flInfo(e){var t="Name: "+e.name+"<br/>";t=(t=t+"Full path: "+e.fullPath+"<br/>")+"URL: "+e.toURL()+"<br/>",document.getElementById("flProperties").innerHTML=t}function flFail(e){document.getElementById("flProperties").innerHTML="File: "+e.code}function netMsg(){return 0!=(onlineNet=navigator.onLine)||(navigator.notification.alert("No network connection",null,"Internet"),!1)}function onDeviceReady(){console.log("** Device ready **"),deviceOn=!0,navigator.splashscreen.show(),pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType,document.getElementById("deviceProperties").innerHTML="Device Name: "+device.name+"<br />Device Cordova: "+device.cordova+"<br />Device Platform: "+device.platform+"<br />Device UUID: "+device.uuid+"<br />Device Version: "+device.version+"<br />",7<=device.version&&"iOS"==SysVar&&(document.body.style.marginTop="20px")}function chgDrakeCanvas(e){try{var t=document.getElementById("drakeCanvas"),n=t.getContext("2d");n.clearRect(0,0,t.height,t.width),n.fillStyle="#FFFFFF",n.rect(0,0,60,20),n.font="30px Arial",n.fillText(e,20,25)}catch(e){alert("pageshow - #pageDrake Error: "+e.message)}}function chgOrbitCanvas(e,t){try{var n=document.getElementById("velCanvas"),a=n.getContext("2d");a.clearRect(0,0,n.height,n.width),a.fillStyle="#FFFFFF",a.rect(0,0,60,20),a.font="20px Arial",a.fillText(e,15,25);var o=document.getElementById("yearCanvas"),r=o.getContext("2d");r.clearRect(0,0,o.height,o.width),r.fillStyle="#FFFFFF",r.rect(0,0,60,20),r.font="20px Arial",r.fillText(t,15,25)}catch(e){alert("pageshow - #pageDrake Error: "+e.message)}}$(function(){console.log("** JQuery running ** "+jQuery().jquery),onlineNet=navigator.onLine,document.addEventListener("deviceready",onDeviceReady,!0);var e=document.getElementById("fb");0==onlineNet&&(e.innerHTML="No Network Connection")}),$(document).on("pageshow","#pageOrbit",function(){crtGraph(graphParm.in1.value,graphParm.e1.value,graphParm.Star.value),setSlider(graphParm.Star.value)}),$(document).on("pageshow","#pageConv",function(){calcConv(Conv.units)}),$(document).on("pageshow","#eventsPage",function(){chkEventRecord(),getLocations(),mapLocation(),getEvent("ALL")}),$(document).on("pageshow","#pageSail",function(){calcSail(Sail.Rf.value,Sail.Ds.value,Sail.Sa.value,Sail.Sm.value)}),$(document).on("pageshow","#pageTemp",function(){lum(star.R.value,star.T.value)}),$(document).on("pageshow","#pageDrake",function(){chgDrakeCanvas(calcDrake(Drake.R.value,Drake.Fp.value,Drake.Ne.value,Drake.Fl.value,Drake.Fi.value,Drake.Fc.value,Drake.L.value))}),$(document).on("mobileinit",function(){$.mobile.allowCrossDomainPages=!0});